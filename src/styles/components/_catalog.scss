/* ===== GRID ===== */
.catalog__grid {
  display: grid;
  gap: clamp(16px, 3vw, 32px);
  grid-template-columns: repeat(auto-fill, minmax(var(--card-min-width), 1fr));
  justify-content: center;
  align-items: stretch;

  /* Лёгкая анимация подъёма всей сетки */
  animation: gridLift 0.35s ease;
}

@keyframes gridLift {
  0% {
    opacity: 0;
    transform: translateY(12px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.catalog {
  padding-block: clamp(32px, 6vw, 72px);

  &__show-more {
    margin-top: clamp(16px, 3vw, 32px);
  }
}

/* ===== PRODUCT CARD ANIMATIONS ===== */

/* Плавное появление */
@keyframes cardFadeIn {
  0% {
    opacity: 0;
    transform: translateY(16px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Плавное исчезновение */
@keyframes cardFadeOut {
  0% {
    opacity: 1;
    transform: scale(1);
  }
  100% {
    opacity: 0;
    transform: scale(0.95);
  }
}

/* Spring-анимация (Показать ещё) */
@keyframes cardSpringIn {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.95);
  }
  60% {
    opacity: 1;
    transform: translateY(-6px) scale(1.02);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Карточка по умолчанию */
.product-card {
  opacity: 0;
  transform: translateY(16px);
  animation: cardFadeIn 0.45s ease forwards;
  animation-delay: calc(var(--i, 0) * 40ms);
  height: 100%;

  display: flex;
  flex-direction: column;
}

/* Fade-out при смене категории */
.product-card.card-exit {
  animation: cardFadeOut 0.25s ease forwards;
}

/* Spring-анимация новых карточек */
.product-card.card-new {
  animation: cardSpringIn 0.55s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  animation-delay: calc(var(--i, 0) * 40ms);
}

/* Footer карточки прижат вниз */
.product-card__bottom {
  margin-top: auto;
}

/* ===== SKELETON COUNT CONTROL ===== */

.product-card--skeleton:nth-child(n + 2) {
  display: none;
}

@media (min-width: 480px) {
  .product-card--skeleton:nth-child(2) {
    display: block;
  }
}

@media (min-width: 768px) {
  .product-card--skeleton:nth-child(3) {
    display: block;
  }
}

@media (min-width: 1024px) {
  .product-card--skeleton:nth-child(4) {
    display: block;
  }
}

/* ===========================
   SKELETON FIX — REQUIRED
   =========================== */

.product-card--skeleton {
  display: flex;
  flex-direction: column;
  padding: var(--space-m);
  border-radius: var(--radius-m);
  height: 100%;
}

/* Image placeholder */
.product-card--skeleton .product-card__image-wrapper {
  width: 100%;
  aspect-ratio: 4/3; /* точно как в реальной карточке */
  border-radius: var(--radius-m);
  margin-bottom: var(--space-m);
}

/* Title */
.skeleton-line--title {
  width: 60%;
  height: 18px;
  margin-bottom: var(--space-s);
}

/* Description */
.skeleton-line--text {
  width: 80%;
  height: 14px;
  margin-bottom: var(--space-l);
}

/* Bottom row */
.product-card--skeleton .product-card__bottom {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* Price block */
.skeleton-line--price {
  width: var(--space-xl);
  height: 18px;
}

/* Button block */
.skeleton-button {
  width: 70px;
  height: var(--space-xl);
  border-radius: var(--radius-m);
}

@keyframes skeleton-shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.skeleton-box,
.skeleton-line,
.skeleton-button {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.06) 0%,
    rgba(255, 255, 255, 0.12) 50%,
    rgba(255, 255, 255, 0.06) 100%
  );
  background-size: 200px 100%;
  animation: skeleton-shimmer 1.2s infinite linear;
  border-radius: 8px;
}
