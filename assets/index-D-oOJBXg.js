(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function i(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=i(a);fetch(a.href,s)}})();document.querySelectorAll("[data-scroll-to]").forEach(t=>{t.addEventListener("click",()=>{document.querySelector(t.dataset.scrollTo)?.scrollIntoView({behavior:"smooth"})})});const S=document.querySelector(".header"),j=document.querySelector(".header__burger"),A=document.querySelector(".header__menu"),T=document.querySelector("[data-header-overlay]");if(j){const t=a=>{const s=document.querySelector('[data-cart][data-state="open"]');!a&&s||(document.body.style.overflow=a?"hidden":"")},e=a=>{j.setAttribute("aria-expanded",a),A?.setAttribute("aria-hidden",a?"false":"true"),t(a)},i=()=>{S.classList.remove("header--open"),e(!1)};j.addEventListener("click",()=>{const a=S.classList.toggle("header--open");e(a)}),A?.addEventListener("click",a=>{const s=a.target.closest("a");if(!s)return;const c=s.getAttribute("href")||"";c.startsWith("#")&&(a.preventDefault(),document.querySelector(c)?.scrollIntoView({behavior:"smooth"})),S.classList.contains("header--open")&&i()}),T?.addEventListener("click",i),window.addEventListener("keydown",a=>{a.key==="Escape"&&S.classList.contains("header--open")&&i()});const r=()=>{if(!A)return;window.innerWidth>=768?(i(),A.removeAttribute("aria-hidden"),j.setAttribute("aria-expanded","false"),document.body.style.overflow=""):e(S.classList.contains("header--open"))};window.addEventListener("resize",r),r()}function B(){const t=document.querySelector(".category-filter"),e=document.querySelector(".category-filter__list");if(!t||!e){console.warn("ScrollIndicators: elements not found!");return}function i(){const r=e.scrollWidth-e.clientWidth,a=e.scrollLeft;if(r<=0){t.dataset.scroll="none";return}a<=0?t.dataset.scroll="start":a>=r-1?t.dataset.scroll="end":t.dataset.scroll="middle"}e.addEventListener("scroll",i),window.addEventListener("resize",i),setTimeout(i,0),i()}function F(){const t=document.querySelectorAll("[data-benefit]"),e=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&(r.target.dataset.visible="true",e.unobserve(r.target))})},{threshold:.2});t.forEach(i=>e.observe(i))}function H(){const t=document.querySelectorAll(".faq__item");t.forEach(e=>{const i=e.querySelector(".faq__question");e.querySelector(".faq__answer"),i.addEventListener("click",()=>{const s=e.dataset.state==="open";t.forEach(c=>{c!==e&&a(c)}),s?a(e):r(e)});function r(s){const c=s.querySelector(".faq__question"),n=s.querySelector(".faq__answer");s.dataset.state="open",c.setAttribute("aria-expanded","true"),n.setAttribute("aria-hidden","false"),n.style.maxHeight=n.scrollHeight+"px",n.dataset.open="true"}function a(s){const c=s.querySelector(".faq__question"),n=s.querySelector(".faq__answer");s.dataset.state="closed",c.setAttribute("aria-expanded","false"),n.setAttribute("aria-hidden","true"),n.style.maxHeight="0px",n.dataset.open="false"}})}function N(){const t=document.querySelector("[data-reviews-slider]");if(!t)return;const e=t.querySelector("[data-reviews-track]"),i=Array.from(e?.querySelectorAll(".reviews__item")??[]),r=t.querySelector("[data-reviews-dots]");if(!e||!i.length||!r)return;const a=()=>window.innerWidth>=1024?3:window.innerWidth>=640?2:1;let s=a(),c=Math.ceil(i.length/s),n=0,l=[];const d=()=>{r.innerHTML="",l=Array.from({length:c},(o,g)=>{const h=document.createElement("button");return h.type="button",h.className="reviews__dot",h.addEventListener("click",()=>m(g)),r.append(h),h})},_=o=>{const g=o+s;i.forEach((h,y)=>{const w=y>=o&&y<g;h.classList.toggle("is-active",w),h.setAttribute("aria-hidden",w?"false":"true")})},m=o=>{const g=Math.max(0,c-1);n=Math.min(Math.max(o,0),g);const h=i[0].getBoundingClientRect().width,y=getComputedStyle(e),w=parseFloat(y.columnGap||y.gap||"0")||0,L=(h+w)*n*s;e.style.transform=`translateX(-${L}px)`,_(n*s),l.forEach(($,z)=>{$.classList.toggle("is-active",z===n)})},u=()=>{const o=a();if(o!==s){s=o,c=Math.ceil(i.length/s),d(),m(0);return}m(n)},f=()=>m(n+1),b=()=>m(n-1);d();let v=0,p=!1;e.addEventListener("pointerdown",o=>{p=!0,v=o.clientX}),e.addEventListener("pointerup",o=>{if(!p)return;const g=o.clientX-v;Math.abs(g)>40&&(g<0?f():b()),p=!1}),e.addEventListener("pointerleave",()=>{p=!1}),window.addEventListener("resize",u),m(0)}const x=[{id:"pizza_vegan",category:"pizza",name:"Пицца Веганская",description:"Диетическая пицца с изысканным овощным вкусом! Соус на томатной основе, помидоры, шампиньоны, лук маринованный, кукуруза, перец болгарский, брокколи, кабачок.",price:230,variants:[{id:"30",label:"30 см",price:230},{id:"40",label:"40 см",price:330}],image:"./assets/images/vegan_pizza.jpg",images:{avif:"./assets/images/vegan_pizza.avif",webp:"./assets/images/vegan_pizza.webp",jpg:"./assets/images/vegan_pizza.jpg"}},{id:"pizza_americana",category:"pizza",name:"Пицца Американа",description:"Пицца на сливочной основе, с курочкой гриль, миксом сыров, беконом, соленными огурцами, маринованым луком, украшенная соусом Чеддер и зеленым луком.",price:315,variants:[{id:"30",label:"30 см",price:315},{id:"40",label:"40 см",price:415}],image:"./assets/images/pizza_americana.jpg",images:{avif:"./assets/images/pizza_americana.avif",webp:"./assets/images/pizza_americana.webp",jpg:"./assets/images/pizza_americana.jpg"}},{id:"pizza_village",category:"pizza",name:"Пицца Деревенская",description:"Оригинальная пицца на чесночном соусе с добавлением бекона, ветчины, шампиньонов и помидоров. Украшена зеленым луком.",price:315,image:"./assets/images/village_pizza.jpg",images:{avif:"./assets/images/village_pizza.avif",webp:"./assets/images/village_pizza.webp",jpg:"./assets/images/village_pizza.jpg"},variants:[{id:"30",label:"30 см",price:315},{id:"40",label:"40 см",price:415}]},{id:"pizza_mexicano",category:"pizza",name:"Пицца Мексиканская",description:"Пицца на остром соусе, с куриным филе, охотничьими колбасками, миксом сыров, луком марс, кукурузой, болгарским перцем. Украшена томатами, перцем чили и петрушкой",price:335,image:"./assets/images/mexicano_pizza.jpg",images:{avif:"./assets/images/mexicano_pizza.avif",webp:"./assets/images/mexicano_pizza.webp",jpg:"./assets/images/mexicano_pizza.jpg"},variants:[{id:"30",label:"30 см",price:335},{id:"40",label:"40 см",price:435}]},{id:"pizza_new_york",category:"pizza",name:"Пицца Нью-йорк",description:"Пицца соус, сыр, охотничьи колбаски, картошка фри.",price:335,image:"./assets/images/new_york_pizza.jpg",images:{avif:"./assets/images/new_york_pizza.avif",webp:"./assets/images/new_york_pizza.webp",jpg:"./assets/images/new_york_pizza.jpg"},variants:[{id:"30",label:"30 см",price:335},{id:"40",label:"40 см",price:435}]},{id:"pizza_meat",category:"pizza",name:"Пицца мясная",description:"Пицца на сливочном соусе с добавлением нежного сыра, куриного филе гриль, ветчины, салями, охотничьих колбасок и пикантных-солёных огурцов на половину пиццы, петрушка",price:335,image:"./assets/images/meat_pizza.jpg",images:{avif:"./assets/images/meat_pizza.avif",webp:"./assets/images/meat_pizza.webp",jpg:"./assets/images/meat_pizza.jpg"},variants:[{id:"30",label:"30 см",price:335},{id:"40",label:"40 см",price:435}]},{id:"pizza_cossack",category:"pizza",name:"Пицца козацкая",description:"Пицца на чесночном соусе, с курицей-гриль, миксом сыров, беконом, салями, охотничьими колбасками, шампиньонами и маслинами.",price:335,image:"./assets/images/cossack_pizza.jpg",images:{avif:"./assets/images/cossack_pizza.avif",webp:"./assets/images/cossack_pizza.webp",jpg:"./assets/images/cossack_pizza.jpg"},variants:[{id:"30",label:"30 см",price:335},{id:"40",label:"40 см",price:435}]},{id:"sushi_philadelphia_classic",category:"sushi",name:"Филадельфия Классическая",description:"Серия самых популярных роллов, со сливочным сыром, огурцом, накрытый свежим Норвежским лососем, задекорирован японским майонезом.",price:285,image:"./assets/images/philadelphia_classic_sushi.jpg",images:{avif:"./assets/images/philadelphia_classic_sushi.avif",webp:"./assets/images/philadelphia_classic_sushi.webp",jpg:"./assets/images/philadelphia_classic_sushi.jpg"},variants:[]},{id:"sushi_philadelphia_smoked_salmon",category:"sushi",name:"Филадельфия Копченый Лосось",description:"Серия самых популярных роллов, со сливочным сыром, икрой тобико, огурцом, накрытый копченым Норвежским лососем.",price:335,image:"./assets/images/philadelphia_smoked_salmon_sushi.jpg",images:{avif:"./assets/images/philadelphia_smoked_salmon_sushi.avif",webp:"./assets/images/philadelphia_smoked_salmon_sushi.webp",jpg:"./assets/images/philadelphia_smoked_salmon_sushi.jpg"},variants:[]},{id:"sushi_green_dragon",category:"sushi",name:"Зеленый дракон",description:"Фирменный ролл с угрем, тамаго, сливочным сыром, огурцом, авокадо, икрой, политый соусом унаги и жаренным кунжутом",price:445,image:"./assets/images/green_dragon_sushi.jpg",images:{avif:"./assets/images/green_dragon_sushi.avif",webp:"./assets/images/green_dragon_sushi.webp",jpg:"./assets/images/green_dragon_sushi.jpg"},variants:[]},{id:"sushi_chess",category:"sushi",name:"Шахматы",description:"Ролл с копченым лососем, сливочным и твердым сырами, моцареллой, огурцом, красной и чёрной икрой.",price:295,image:"./assets/images/chess_sushi.jpg",images:{avif:"./assets/images/chess_sushi.avif",webp:"./assets/images/chess_sushi.webp",jpg:"./assets/images/chess_sushi.jpg"},variants:[]},{id:"burgers_hamburger",category:"burgers",name:"Гамбургер",description:"Бургер с котлетой из отборной говядины, маринованные огурцы, маринованный лук, салат, ароматный помидорный соус, сладкая горчица и хрустящая булочка.",price:155,image:"./assets/images/hamburger.jpg",images:{avif:"./assets/images/hamburger.avif",webp:"./assets/images/hamburger.webp",jpg:"./assets/images/hamburger.jpg"},variants:[]},{id:"burgers_kinder_burger",category:"burgers",name:"Киндер Бургер",description:"Любимый бургер всех детей! Бургер с котлетой из отборной говядины, ломтиком нежного сыра, маринованные огурцы, ароматный помидорный соус и хрустящая булочка.",price:145,image:"./assets/images/kinder_burger.jpg",images:{avif:"./assets/images/kinder_burger.avif",webp:"./assets/images/kinder_burger.webp",jpg:"./assets/images/kinder_burger.jpg"},variants:[]},{id:"burgers_cheeseburger",category:"burgers",name:"Чизбургер",description:"Бургер с котлетой из отборной говядины, ломтиком нежного сыра, маринованным огурцом, маринованным луком, салатом, ароматным помидорным соусом, сладкой горчицей и хрустящей булочкой.",price:155,image:"./assets/images/cheeseburger.jpg",images:{avif:"./assets/images/cheeseburger.avif",webp:"./assets/images/cheeseburger.webp",jpg:"./assets/images/cheeseburger.jpg"},variants:[]},{id:"desserts_coconut-chocolate_cake",category:"desserts",name:"Кокосово-шоколадный торт",description:"Удивительное сочетание кокоса и шоколада в одном десерте. Подаётся с сахарной пудрой, шоколадным топпингом и десертной вишней.",price:150,image:"./assets/images/coconut-chocolate_cake.jpg",images:{avif:"./assets/images/coconut-chocolate_cake.avif",webp:"./assets/images/coconut-chocolate_cake.webp",jpg:"./assets/images/coconut-chocolate_cake.jpg"},variants:[]},{id:"desserts_cheesecake",category:"desserts",name:"Чизкейк",description:"Нежнейшее лакомство! Белоснежный торт с восхитительным сливочно-сырным, воздушным вкусом! Вкусный, высокий, нежный и красивый. ",price:165,image:"./assets/images/cheesecake.jpg",images:{avif:"./assets/images/cheesecake.avif",webp:"./assets/images/cheesecake.webp",jpg:"./assets/images/cheesecake.jpg"},variants:[]},{id:"desserts_",category:"desserts",name:"Шоколадный Брауни",description:"Настоящий американец - восхитительный шоколадный Брауни с шариком мороженого и богатым шоколадным вкусом! Наслаждение, которое хочется испытывать снова и снова...",price:175,image:"./assets/images/chocolate_brownie.jpg",images:{avif:"./assets/images/chocolate_brownie.avif",webp:"./assets/images/chocolate_brownie.webp",jpg:"./assets/images/chocolate_brownie.jpg"},variants:[]}];function V(t,e){const i=document.createElement("article");i.className="product-card",i.dataset.productId=t.id;const r=t.images||{avif:t.imageAvif||t.image,webp:t.imageWebp||t.image,jpg:t.image},a=Array.isArray(t.variants)&&t.variants.length,c=(a?t.variants[0]:null)?.price??t.price,n=a?`
      <div class="product-card__variants is-hidden" role="group" aria-label="Выбор размера" aria-hidden="true" data-variants>
        ${t.variants.map((l,d)=>`
              <button
                class="product-card__variant ${d===0?"is-active":""}"
                type="button"
                data-variant-id="${l.id}"
                aria-pressed="${d===0}"
              >
                ${l.label} — ${l.price} ₴
              </button>
            `).join("")}
      </div>
    `:"";return i.innerHTML=`
    <picture class="product-card__image-wrapper">
      <source srcset="${r.avif}" type="image/avif" />
      <source srcset="${r.webp}" type="image/webp" />
      <img
        src="${r.jpg}"
        alt="${t.name}"
        class="product-card__image"
        loading="lazy"
        decoding="async"
        sizes="(min-width: 1024px) 320px, (min-width: 768px) 280px, 220px"
      />
    </picture>

    <h3 class="product-card__title">${t.name}</h3>
    <p class="product-card__description">${t.description}</p>
    ${n}

    <div class="product-card__bottom">
      <div class="product-card__price" data-product-price>${c} ₴</div>

      <div class="product-card__actions">

        <button class="product-card__add" data-product-add>Добавить</button>

        <div class="product-card__counter" hidden>
          <button data-product-decrease class="product-card__counter-btn">-</button>
          <span data-product-qty class="product-card__counter-value">1</span>
          <button data-product-increase class="product-card__counter-btn">+</button>
        </div>

      </div>
    </div>
  `,W(i,e,t,a),i}function W(t,e,i,r){const a=t.querySelector("[data-product-add]"),s=t.querySelector(".product-card__counter"),c=t.querySelector("[data-product-qty]"),n=t.querySelector("[data-product-increase]"),l=t.querySelector("[data-product-decrease]"),d=Array.from(t.querySelectorAll("[data-variant-id]")),_=t.querySelector("[data-product-price]"),m=t.querySelector("[data-variants]"),u=t.dataset.productId;let f=d[0]?.dataset.variantId||"";const b=()=>{const o=i?.variants?.find(g=>g.id===f)?.price??i?.price??0;_&&(_.textContent=`${o} ₴`)},v=()=>{const p=e.getQty(u,f);p===0?(a.hidden=!1,s.hidden=!0):(a.hidden=!0,s.hidden=!1,c.textContent=p)};v(),a.addEventListener("click",()=>{if(r&&m?.classList.contains("is-hidden")){m.classList.remove("is-hidden"),m.setAttribute("aria-hidden","false");return}e.add(u,f),v()}),n.addEventListener("click",()=>{e.add(u,f),v()}),l.addEventListener("click",()=>{e.remove(u,f),v()}),d.forEach(p=>{p.addEventListener("click",()=>{f=p.dataset.variantId||"",d.forEach(o=>{const g=o===p;o.classList.toggle("is-active",g),o.setAttribute("aria-pressed",g?"true":"false")}),b(),v(),r&&m&&!m.classList.contains("is-hidden")&&(e.add(u,f),v())})}),b(),e.subscribe(()=>v())}const I=12;function D(t){return new Promise(e=>setTimeout(e,t))}async function M(t,e,i={}){const{category:r="all",limit:a=I}=i,s=document.querySelector("[data-catalog-grid]"),c=document.querySelector("[data-catalog-skeleton]"),n=document.querySelector("[data-show-more]");if(!s||!c||!n)return;if(!t||t.length===0){s.hidden=!0,c.hidden=!1,n.hidden=!0;return}c.hidden=!0,s.hidden=!1,s.children.length>0&&(Array.from(s.children).forEach(_=>_.classList.add("card-exit")),await D(200));const l=t.slice(0,a);s.innerHTML="",l.forEach((_,m)=>{const u=V(_,e);u.style.setProperty("--i",m),s.append(u)});const d=t.length-l.length;d>0?(n.hidden=!1,n.textContent=`Показать ещё (${d})`):n.hidden=!0}function R(t,e,i){const r=document.querySelector("[data-catalog-grid]"),a=t.slice(0,i),s=r.children.length;a.slice(s).forEach((n,l)=>{const d=V(n,e);d.classList.add("card-new"),d.style.setProperty("--i",l),r.append(d)})}function K(t,e){const i=Array.from(t.querySelectorAll("[data-category]"));let r="all";t.addEventListener("click",a=>{const s=a.target.closest("[data-category]");if(!s)return;const c=s.dataset.category;c!==r&&(r=c,i.forEach(n=>{const l=n===s;n.classList.toggle("category-filter__item--active",l),n.setAttribute("aria-selected",l?"true":"false")}),s.offsetHeight,s.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"}),e(c))})}class Q{constructor(){this.items=JSON.parse(localStorage.getItem("foodly_cart")||"{}"),this.normalizeItems(),this.subscribers=new Set}save(){localStorage.setItem("foodly_cart",JSON.stringify(this.items))}subscribe(e){this.subscribers.add(e),e(this.items)}notify(){this.save(),this.subscribers.forEach(e=>e(this.items))}key(e,i){return i?`${e}::${i}`:e}add(e,i=""){const r=this.key(e,i);this.items[r]=(this.items[r]||0)+1,this.notify()}remove(e,i=""){const r=this.key(e,i);this.items[r]&&(this.items[r]--,this.items[r]<=0&&delete this.items[r],this.notify())}getQty(e,i=""){return this.items[this.key(e,i)]||0}clear(){this.items={},this.notify()}normalizeItems(){const e={...this.items};Object.entries(e).forEach(([i,r])=>{if(i.includes("::"))return;const a=x.find(s=>s.id===i);if(a&&Array.isArray(a.variants)&&a.variants.length>0){const s=this.key(a.id,a.variants[0].id);e[s]=(e[s]||0)+r,delete e[i]}}),this.items=e,this.save()}}function X(t){const e=document.querySelector("[data-cart]"),i=document.querySelector("[data-cart-open]"),r=e.querySelectorAll("[data-cart-close]"),a=e.querySelector("[data-cart-items]"),s=e.querySelector("[data-cart-total]"),c=e.querySelector("[data-cart-empty]"),n=document.querySelector("[data-cart-count]"),l=document.querySelector(".header__cart-icon");let d=null;const _=()=>{e.hidden=!1,requestAnimationFrame(()=>{e.dataset.state="open",e.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",d?.(),d=G(e)})},m=()=>{e.dataset.state="closed",e.setAttribute("aria-hidden","true"),document.body.style.overflow="",d?.(),d=null,setTimeout(()=>{e.dataset.state!=="open"&&(e.hidden=!0)},250)};i.addEventListener("click",_),r.forEach(u=>u.addEventListener("click",m)),document.addEventListener("keydown",u=>{u.key==="Escape"&&e.dataset.state==="open"&&m()}),t.subscribe(u=>{a.innerHTML="";const f=Object.keys(u),b=f.reduce((p,o)=>p+(u[o]||0),0);let v=0;if(n&&(n.textContent=b),l&&(l.src=b>0?"./assets/icons/empty_cart.svg":"./assets/icons/cart.svg"),f.length===0){c.hidden=!1,s.textContent="0 ₴";return}c.hidden=!0,f.forEach(p=>{const[o,g=""]=p.split("::"),h=x.find(C=>C.id===o),y=h?.variants?.find(C=>C.id===g),w=u[p];if(!h){console.warn(`Product ${p} not found → removing from cart`),t.remove(o,g);return}const L=y?.price??h.price??0,$=y&&y.label?`${h.name} — ${y.label}`:h.name;v+=L*w;const z=document.createElement("li");z.className="cart__item",z.innerHTML=`
        <div class="cart-item__info">
          <div class="cart-item__title">${$}</div>
          <div class="cart-item__price">${L} ₴</div>
        </div>

        <div class="cart-item__counter">
          <button class="cart-item__btn" data-cart-decrease>-</button>
          <span class="cart-item__qty">${w}</span>
          <button class="cart-item__btn" data-cart-increase>+</button>
        </div>
      `,z.querySelector("[data-cart-decrease]").addEventListener("click",()=>t.remove(o,g)),z.querySelector("[data-cart-increase]").addEventListener("click",()=>t.add(o,g)),a.append(z)}),s.textContent=`${v} ₴`})}function G(t){const e=Array.from(t.querySelectorAll("button, a, input, [tabindex]")).filter(s=>!s.hasAttribute("disabled"));if(!e.length)return()=>{};const i=e[0],r=e[e.length-1];function a(s){s.key==="Tab"&&(s.shiftKey&&document.activeElement===i?(s.preventDefault(),r.focus()):!s.shiftKey&&document.activeElement===r&&(s.preventDefault(),i.focus()))}return t.addEventListener("keydown",a),i?.focus(),()=>t.removeEventListener("keydown",a)}document.querySelector("[data-year]").textContent=new Date().getFullYear();const J=document.querySelector(".category-filter__list"),O=document.querySelector("[data-show-more]");let E="all",q=I,k;function P(){return E==="all"?x:x.filter(t=>t.category===E)}window.addEventListener("load",()=>{console.log("Foodly started!"),k=new Q,X(k),M(P(),k,{category:E,limit:q}),K(J,t=>{E=t,q=I,M(P(),k,{category:E,limit:q})}),O.addEventListener("click",()=>{q+=I;const t=P();q>=t.length&&(O.hidden=!0),R(t,k,q)}),B(),F(),H(),N()});
